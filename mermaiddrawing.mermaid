graph TD
  subgraph "Core Modular Platform"
    A1["Workflow Builder UI<br/>Flutter native"]
    A2["Builder Metadata Model"]
    A3["Shared Step Type Library"]
    A4["Shared DSL & Validator"]
  end
  
  subgraph "Domain Configurations"
    B1["Compliance Config<br/>(AI Standards Consultant)"]
    B2["5G Config<br/>(Arion5G Orchestrator)"]
    B3["Training Config<br/>(TrainerOps)"]
  end
  
  subgraph "Workflow Engine Package"
    C1["Engine Runtime Core"]
    C2["Trigger & Step Resolver"]
    C3["AI Orchestration Layer"]
    C4["Logging & Traceability"]
  end
  
  subgraph "Domain App Instances"
    D1["Compliance App<br/>(shared DB/schema)"]
    D2["5G Orchestration App<br/>(dedicated DB + AI)"]
    D3["TrainingOps App<br/>(separate deployment)"]
  end
  
  subgraph "AI Backends"
    E1["Compliance AI Stack<br/>(Prompt, RAG, Audit)"]
    E2["5G AI Stack<br/>(Telemetry + NLP)"]
    E3["Training AI Stack<br/>(Instructional Feedback)"]
  end
  
  %% Core Platform Flow
  A1 --> A2
  A2 --> A3
  A3 --> A4
  
  %% Configuration Compilation
  A4 --> B1
  A4 --> B2
  A4 --> B3
  
  %% Engine Assembly
  B1 --> C1
  B2 --> C1
  B3 --> C1
  
  %% Engine Internal Flow
  C1 --> C2
  C2 --> C3
  C3 --> C4
  
  %% App-Engine Connections
  D1 --> C1
  D2 --> C1
  D3 --> C1
  
  %% AI Backend Connections
  C3 --> E1
  C3 --> E2
  C3 --> E3
  
  %% Direct App-AI Connections
  D1 --> E1
  D2 --> E2
  D3 --> E3
